"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r,t,n=e(require("leven")),s=e(require("lodash.deburr"));(r=exports.ReturnTypeEnums||(exports.ReturnTypeEnums={})).ALL_CLOSEST_MATCHES="all-closest-matches",r.ALL_MATCHES="all-matches",r.ALL_SORTED_MATCHES="all-sorted-matches",r.FIRST_CLOSEST_MATCH="first-closest-match",r.FIRST_MATCH="first-match",(t=exports.ThresholdTypeEnums||(exports.ThresholdTypeEnums={})).EDIT_DISTANCE="edit-distance",t.SIMILARITY="similarity";var u=new Error("unknown returnType"),o=new Error("unknown thresholdType");function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var p=function(e,r){var t=e;return r.trimSpaces&&(t=t.trim().replace(/\s+/g," ")),r.deburr&&(t=s(t)),r.caseSensitive||(t=t.toLowerCase()),t},h=function(e,r){var t=function(e,r){var t=Array.isArray(r)&&r.length?r.reduce((function(e,r){return null==e?void 0:e[r]}),e):e;return"string"!=typeof t?"":t}(e,r.matchPath);return p(t,r)};exports.default=function(e,r,t){var s,a,T=function(e){var r=c({caseSensitive:!1,deburr:!0,matchPath:[],returnType:exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH,thresholdType:exports.ThresholdTypeEnums.SIMILARITY,trimSpaces:!0},e);switch(r.thresholdType){case exports.ThresholdTypeEnums.EDIT_DISTANCE:return c({threshold:20},r);case exports.ThresholdTypeEnums.SIMILARITY:return c({threshold:.4},r);default:throw o}}(t),i=T.returnType,l=T.threshold,E=T.thresholdType,f=p(e,T);switch(E){case exports.ThresholdTypeEnums.EDIT_DISTANCE:s=function(e){return e<=l},a=function(e){return n(f,h(e,T))};break;case exports.ThresholdTypeEnums.SIMILARITY:s=function(e){return e>=l},a=function(e){return function(e,r){if(!e||!r)return 0;if(e===r)return 1;var t=n(e,r),s=Math.max(e.length,r.length);return(s-t)/s}(f,h(e,T))};break;default:throw o}var S=[],y=r.length;switch(i){case exports.ReturnTypeEnums.ALL_CLOSEST_MATCHES:case exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH:var d,m=[];switch(E){case exports.ThresholdTypeEnums.EDIT_DISTANCE:d=1/0;for(var A=0;A<y;A+=1){var I=a(r[A]);d>I&&(d=I),m.push(I)}break;case exports.ThresholdTypeEnums.SIMILARITY:d=0;for(var b=0;b<y;b+=1){var v=a(r[b]);d<v&&(d=v),m.push(v)}break;default:throw o}for(var _=m.length,L=0;L<_;L+=1){var x=m[L];s(x)&&x===d&&S.push(L)}break;case exports.ReturnTypeEnums.ALL_MATCHES:for(var C=0;C<y;C+=1){s(a(r[C]))&&S.push(C)}break;case exports.ReturnTypeEnums.ALL_SORTED_MATCHES:for(var O=[],R=0;R<y;R+=1){var M=a(r[R]);s(M)&&O.push({score:M,index:R})}switch(E){case exports.ThresholdTypeEnums.EDIT_DISTANCE:O.sort((function(e,r){return e.score-r.score}));break;case exports.ThresholdTypeEnums.SIMILARITY:O.sort((function(e,r){return r.score-e.score}));break;default:throw o}for(var w=0,g=O;w<g.length;w++){var D=g[w];S.push(D.index)}break;case exports.ReturnTypeEnums.FIRST_MATCH:for(var H=0;H<y;H+=1){if(s(a(r[H]))){S.push(H);break}}break;default:throw u}return function(e,r,t){switch(t){case exports.ReturnTypeEnums.ALL_CLOSEST_MATCHES:case exports.ReturnTypeEnums.ALL_MATCHES:case exports.ReturnTypeEnums.ALL_SORTED_MATCHES:return r.map((function(r){return e[r]}));case exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH:case exports.ReturnTypeEnums.FIRST_MATCH:return r.length?e[r[0]]:null;default:return null}}(r,S,i)};
//# sourceMappingURL=index.cjs.js.map
