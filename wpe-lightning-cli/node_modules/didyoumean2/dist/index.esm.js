import r from"leven";import e from"lodash.deburr";var t,n;!function(r){r.ALL_CLOSEST_MATCHES="all-closest-matches",r.ALL_MATCHES="all-matches",r.ALL_SORTED_MATCHES="all-sorted-matches",r.FIRST_CLOSEST_MATCH="first-closest-match",r.FIRST_MATCH="first-match"}(t||(t={})),function(r){r.EDIT_DISTANCE="edit-distance",r.SIMILARITY="similarity"}(n||(n={}));var a=new Error("unknown returnType"),c=new Error("unknown thresholdType");function o(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function u(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){o(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var i=function(r,t){var n=r;return t.trimSpaces&&(n=n.trim().replace(/\s+/g," ")),t.deburr&&(n=e(n)),t.caseSensitive||(n=n.toLowerCase()),n},T=function(r,e){var t=function(r,e){var t=Array.isArray(e)&&e.length?e.reduce((function(r,e){return null==r?void 0:r[e]}),r):r;return"string"!=typeof t?"":t}(r,e.matchPath);return i(t,e)};export default function(e,o,s){var f,h,l=function(r){var e=u({caseSensitive:!1,deburr:!0,matchPath:[],returnType:t.FIRST_CLOSEST_MATCH,thresholdType:n.SIMILARITY,trimSpaces:!0},r);switch(e.thresholdType){case n.EDIT_DISTANCE:return u({threshold:20},e);case n.SIMILARITY:return u({threshold:.4},e);default:throw c}}(s),S=l.returnType,p=l.threshold,A=l.thresholdType,I=i(e,l);switch(A){case n.EDIT_DISTANCE:f=function(r){return r<=p},h=function(e){return r(I,T(e,l))};break;case n.SIMILARITY:f=function(r){return r>=p},h=function(e){return function(e,t){if(!e||!t)return 0;if(e===t)return 1;var n=r(e,t),a=Math.max(e.length,t.length);return(a-n)/a}(I,T(e,l))};break;default:throw c}var E=[],b=o.length;switch(S){case t.ALL_CLOSEST_MATCHES:case t.FIRST_CLOSEST_MATCH:var v,L=[];switch(A){case n.EDIT_DISTANCE:v=1/0;for(var _=0;_<b;_+=1){var C=h(o[_]);v>C&&(v=C),L.push(C)}break;case n.SIMILARITY:v=0;for(var d=0;d<b;d+=1){var O=h(o[d]);v<O&&(v=O),L.push(O)}break;default:throw c}for(var w=L.length,y=0;y<w;y+=1){var M=L[y];f(M)&&M===v&&E.push(y)}break;case t.ALL_MATCHES:for(var m=0;m<b;m+=1){f(h(o[m]))&&E.push(m)}break;case t.ALL_SORTED_MATCHES:for(var g=[],D=0;D<b;D+=1){var H=h(o[D]);f(H)&&g.push({score:H,index:D})}switch(A){case n.EDIT_DISTANCE:g.sort((function(r,e){return r.score-e.score}));break;case n.SIMILARITY:g.sort((function(r,e){return e.score-r.score}));break;default:throw c}for(var R=0,k=g;R<k.length;R++){var j=k[R];E.push(j.index)}break;case t.FIRST_MATCH:for(var P=0;P<b;P+=1){if(f(h(o[P]))){E.push(P);break}}break;default:throw a}return function(r,e,n){switch(n){case t.ALL_CLOSEST_MATCHES:case t.ALL_MATCHES:case t.ALL_SORTED_MATCHES:return e.map((function(e){return r[e]}));case t.FIRST_CLOSEST_MATCH:case t.FIRST_MATCH:return e.length?r[e[0]]:null;default:return null}}(o,E,S)}export{t as ReturnTypeEnums,n as ThresholdTypeEnums};
//# sourceMappingURL=index.esm.js.map
